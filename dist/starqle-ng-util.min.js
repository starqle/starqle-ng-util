!function(){"use strict";angular.module("on.root.scope",[]).config(["$provide",function(e){return e.decorator("$rootScope",["$delegate",function(e){return Object.defineProperty(e.constructor.prototype,"$onRootScope",{value:function(t,n){var r;return r=e.$on(t,n),this.$on("$destroy",r)},enumerable:!1}),e}])}]);var e;e=angular.module("sh.api.module",[]);var t;t=angular.module("sh.datepicker.module",[]);var n;n=angular.module("sh.dialog.module",[]);var r;r=angular.module("sh.form.module",[]);var a;a=angular.module("sh.helper.module",[]);var i;i=angular.module("sh.persistence.module",[]);var o;o=angular.module("sh.spinning.module",[]);var s;s=angular.module("sh.table.module",[]);var l;l=angular.module("sh.validation.module",[]),s.directive("shTablePagination",function(){return{restrict:"A",transclude:!0,scope:{shTablePagination:"=",shTablePaginationAction:"&"},template:'<div ng-if="shTablePagination.totalCount > 10" class="pagination form-inline pull-left">\n  <select ng-model=\'perPage\' ng-change="shTablePaginationAction({pageNumber: 1, perPage: perPage})" ng-options="perPage for perPage in getPerPages()" class="form-control text-right"></select>&nbsp;\n  &nbsp;\n  &nbsp;\n</div>\n\n<ul class="pagination pull-left">\n  <li ng-repeat="page in shTablePagination.pages" ng-switch="page.type">\n    <a ng-switch-when="FIRST" ng-disabled="page.disabled" ng-click="shTablePaginationAction({pageNumber: page.number})">«</a>\n    <a ng-switch-when="PREV" ng-disabled="page.disabled" ng-click="shTablePaginationAction({pageNumber: page.number})">&lt;</a>\n    <a ng-switch-when="PAGE" ng-disabled="page.disabled" ng-click="shTablePaginationAction({pageNumber: page.number})">\n      <span ng-bind="page.number"></span>\n    </a>\n    <a ng-switch-when="MORE" ng-disabled="page.disabled">…</a>\n    <a ng-switch-when="NEXT" ng-disabled="page.disabled" ng-click="shTablePaginationAction({pageNumber: page.number})">&gt;</a>\n    <a ng-switch-when="LAST" ng-disabled="page.disabled" ng-click="shTablePaginationAction({pageNumber: page.number})">»</a>\n  </li>\n</ul>\n\n<div class="pagination pull-left">\n  <div class="btn disabled">\n    <span class="page-count">\n      &nbsp;{{shTablePagination.currentPageCount}}&nbsp;\n    </span>\n    <span>\n      <em translate="LABEL_OF"></em>\n    </span>\n    <span class="page-total">\n      &nbsp;{{shTablePagination.totalCount}}&nbsp;\n    </span>\n  </div>\n</div>\n\n<div class="pagination pull-left">\n  <div ng-click="shTablePaginationAction()" class="btn">\n    <i class="fa fa-refresh"></i>\n  </div>\n</div>',controller:["$scope",function(e){e.perPage=10,e.getPerPages=function(){return[10,20,50,100]}}]}}),angular.module("sh.bootstrap",[]).directive("shBootstrapTooltip",[function(){return{restrict:"A",link:function(e,t,n){angular.element(t).on("click",function(){angular.element(t).tooltip("hide")}).on("mouseenter",function(){angular.element(t).tooltip("show")}).on("mouseleave",function(){angular.element(t).tooltip("hide")})}}}]).directive("shBootstrapPopover",["$timeout",function(e){return{restrict:"A",link:function(t,n,r){var a,i,o;o={popoverId:null,timeoutFn:null,addTimeout:function(t){o.timeoutFn=e(function(){return angular.element(t).popover("hide")},100)},cancelTimeout:function(){return e.cancel(o.timeoutFn)}},i=function(){return o.cancelTimeout()},a=function(){return o.addTimeout(n)},angular.element(n).on("mouseenter",function(){o.cancelTimeout(),angular.isUndefined(angular.element(n).attr("aria-describedby"))&&angular.element(n).popover("show")}).on("mouseleave",function(){return o.addTimeout(n)}).on("shown.bs.popover",function(){return o.popoverId=angular.element(n).attr("aria-describedby"),angular.element("#"+o.popoverId).on("mouseenter",i),angular.element("#"+o.popoverId).on("mouseleave",a)}).on("hide.bs.popover",function(){return angular.element("#"+o.popoverId).off("mouseenter",i),angular.element("#"+o.popoverId).off("mouseleave",a)})}}}]),angular.module("sh.collapsible",[]).directive("shCollapsible",function(){return{restrict:"AEC",scope:{shCollapsibleCollapsed:"@?",shCollapsibleCollapseFn:"&",shCollapsibleExpandFn:"&"},controller:["$scope","$element","$timeout",function(e,t,n){var r;r=this,this.shCollapse=!1,this.bodyElements=[],this.triggerResizeTimeout=function(){return n(function(){angular.element(window).triggerHandler("resize")},10)},this.toggleCollapse=function(){var e,n,a,i,o,s,l;if(this.shCollapse=!this.shCollapse,this.isCollapse())for(s=this.bodyElements,n=0,i=s.length;n<i;n++)e=s[n],e.slideUp("fast",r.triggerResizeTimeout),t.addClass("is-collapse");else for(l=this.bodyElements,a=0,o=l.length;a<o;a++)e=l[a],e.slideDown("fast",r.triggerResizeTimeout),t.removeClass("is-collapse")},this.addCollapsibleBodyElement=function(e){this.bodyElements.push(e)},this.isCollapse=function(){return this.shCollapse}}],controllerAs:"shCollapsibleController",link:function(e,t,n,r){e.shCollapsibleExpandFn({expandFn:function(){if(r.isCollapse())return r.toggleCollapse()}}),e.shCollapsibleCollapseFn({collapseFn:function(){if(!r.isCollapse())return r.toggleCollapse()}}),"true"===e.shCollapsibleCollapsed&&r.toggleCollapse()}}}).directive("shCollapsibleBody",function(){return{restrict:"AEC",scope:{},require:"^shCollapsible",link:function(e,t,n,r){r.addCollapsibleBodyElement(t)}}}).directive("shCollapsibleControl",function(){return{restrict:"AEC",scope:{},require:"^shCollapsible",link:function(e,t,n,r){t.bind("click",function(){r.toggleCollapse()})}}}),t.directive("shDatepicker",[function(){return{restrict:"A",scope:{shDisplayFormat:"@?",shFromDate:"=?",shIcons:"=?",shThruDate:"=?",widgetVerticalPosition:"@?"},require:"?ngModel",link:function(e,t,n,r){var a,i,o,s,l,u,c,h,d,f,m,p,g,b;b="YYYY-MM-DD",a=null!=(h=e.shDisplayFormat)?h:"DD-MM-YYYY",o=!1,u=-1,s=function(e){return null!=e?moment(e).format(a):null},r.$formatters.push(s),c=function(e){var t;return moment(e,a).isValid()?(t=moment(e,a).format(b),l(t)?(f(t),t):(f(null),r.$setViewValue(null),e=null,null)):(e=null,null)},r.$parsers.push(c),r.$render=function(){angular.isDefined(r.$modelValue)||(r.$modelValue=null)},l=function(e){var n,r,a,i,o,s;return!(null!=(null!=(a=t.data("DateTimePicker"))?a.maxDate():void 0)&&(null!=(i=t.data("DateTimePicker"))?i.maxDate():void 0)&&(n=t.data("DateTimePicker").maxDate().format(b),moment(e).isAfter(n)))&&!(null!=(null!=(o=t.data("DateTimePicker"))?o.minDate():void 0)&&(null!=(s=t.data("DateTimePicker"))?s.minDate():void 0)&&(r=t.data("DateTimePicker").minDate().format(b),moment(e).isBefore(r)))},d=function(n){var r;t.unbind("dp.change",i),null!=(r=t.data("DateTimePicker"))&&r.destroy(),t.datetimepicker({format:a,showClear:!0,showClose:!0,showTodayButton:!1,useCurrent:!1,useStrict:!0,widgetPositioning:{vertical:e.widgetVerticalPosition||"auto"}}),f(n),m(e.shIcons),g(e.shFromDate),p(e.shThruDate),t.bind("dp.change",i)},f=function(e){null!=e?t.data("DateTimePicker").date(moment(e)):t.data("DateTimePicker").clear()},g=function(e){var n,r,a,i,o;null!=e?(null!=(null!=(r=t.data("DateTimePicker"))?r.maxDate():void 0)&&(null!=(a=t.data("DateTimePicker"))?a.maxDate():void 0)&&(n=t.data("DateTimePicker").maxDate().format(b),moment(e).isAfter(n)&&(e=n)),null!=(i=t.data("DateTimePicker"))&&i.minDate(moment(e).startOf("day"))):null!=(o=t.data("DateTimePicker"))&&o.minDate(!1)},p=function(e){var n,r,a,i,o;null!=e?(null!=(null!=(r=t.data("DateTimePicker"))?r.minDate():void 0)&&(null!=(a=t.data("DateTimePicker"))?a.minDate():void 0)&&(n=t.data("DateTimePicker").minDate().format(b),moment(e).isBefore(n)&&(e=n)),null!=(i=t.data("DateTimePicker"))&&i.maxDate(moment(e).endOf("day"))):null!=(o=t.data("DateTimePicker"))&&o.maxDate(!1)},m=function(e){null!=e&&t.data("DateTimePicker").icons(e)},i=function(e){o=!0,e.date?r.$setViewValue(e.date.format(a)):r.$setViewValue(null)},e.$watch("shFromDate",function(e,t){g(e)}),e.$watch("shThruDate",function(e,t){p(e)}),e.$watch(function(){return moment.defaultZone.name},function(e,t){null!=e&&e!==t&&d(r.$modelValue)}),e.$watch(function(){return r.$modelValue},function(e,t){o||e!==u&&angular.isDefined(e)&&(u=e,d(u))})}}}]),t.directive("shDatetimepicker",["dateFilter",function(e){return{restrict:"A",scope:{ngModel:"=",shDisplayFormat:"@?",shFromTime:"=?",shIcons:"=?",shThruTime:"=?",widgetVerticalPosition:"@?"},require:"?ngModel",link:function(e,t,n,r){var a,i,o,s,l,u,c,h,d,f,m,p,g,b;b="x",a=null!=(h=e.shDisplayFormat)?h:"DD-MM-YYYY, HH:mm (z)",o=!1,u=-1,s=function(e){return null!=e?(isNaN(e)&&moment(e,moment.ISO_8601).isValid()||(e*=1),moment(e).tz(moment.defaultZone.name).format(a)):null},r.$formatters.push(s),c=function(e){var t;return moment.tz(e,a,moment.defaultZone.name).isValid()?(t=moment.tz(e,a,moment.defaultZone.name).format(b),l(t)?(f(t),t):(f(null),r.$setViewValue(null),e=null,null)):(e=null,null)},r.$parsers.push(c),r.$render=function(){angular.isDefined(r.$modelValue)||(r.$modelValue=null)},l=function(e){var n,r,a,i,o,s;return!(null!=(null!=(a=t.data("DateTimePicker"))?a.maxDate():void 0)&&(null!=(i=t.data("DateTimePicker"))?i.maxDate():void 0)&&(n=t.data("DateTimePicker").maxDate().valueOf(),n<e))&&!(null!=(null!=(o=t.data("DateTimePicker"))?o.minDate():void 0)&&(null!=(s=t.data("DateTimePicker"))?s.minDate():void 0)&&(r=t.data("DateTimePicker").minDate().valueOf(),r>e))},d=function(n){var r;t.unbind("dp.change",i),null!=(r=t.data("DateTimePicker"))&&r.destroy(),t.datetimepicker({format:a,showClear:!0,showClose:!0,showTodayButton:!1,timeZone:moment.defaultZone.name,useCurrent:!1,useStrict:!0,widgetPositioning:{vertical:e.widgetVerticalPosition||"auto"}}),f(n),m(e.shIcons),g(e.shFromTime),p(e.shThruTime),t.bind("dp.change",i)},f=function(e){null!=e?(isNaN(e)&&moment(e,moment.ISO_8601).isValid()||(e*=1),t.data("DateTimePicker").date(moment(e).tz(moment.defaultZone.name))):t.data("DateTimePicker").clear()},g=function(e){var n,r,a,i,o;null!=e?(isNaN(e)&&moment(e,moment.ISO_8601).isValid()||(e*=1),null!=(null!=(r=t.data("DateTimePicker"))?r.maxDate():void 0)&&(null!=(a=t.data("DateTimePicker"))?a.maxDate():void 0)&&(n=t.data("DateTimePicker").maxDate().valueOf(),n<e&&(e=n)),null!=(i=t.data("DateTimePicker"))&&i.minDate(moment(e).tz(moment.defaultZone.name))):null!=(o=t.data("DateTimePicker"))&&o.minDate(!1)},p=function(e){var n,r,a,i,o;null!=e?(isNaN(e)&&moment(e,moment.ISO_8601).isValid()||(e*=1),null!=(null!=(r=t.data("DateTimePicker"))?r.minDate():void 0)&&(null!=(a=t.data("DateTimePicker"))?a.minDate():void 0)&&(n=t.data("DateTimePicker").minDate().valueOf(),n>e&&(e=n)),null!=(i=t.data("DateTimePicker"))&&i.maxDate(moment(e).tz(moment.defaultZone.name))):null!=(o=t.data("DateTimePicker"))&&o.maxDate(!1)},m=function(e){null!=e&&t.data("DateTimePicker").icons(e)},i=function(e){o=!0,e.date?r.$setViewValue(e.date.tz(moment.defaultZone.name).format(a)):r.$setViewValue(null)},e.$watch("shFromTime",function(e,t){g(e)}),e.$watch("shThruTime",function(e,t){p(e)}),e.$watch(function(){return moment.defaultZone.name},function(e,t){null!=e&&e!==t&&d(r.$modelValue)}),e.$watch(function(){return r.$modelValue},function(t,n){o||t!==u&&angular.isDefined(t)&&(u=t,isNaN(u)&&moment(u,moment.ISO_8601).isValid()&&(u=moment(u).format("x"),e.ngModel=u),d(u))})}}}]),t.directive("shDatetime",[function(){return{restrict:"A",scope:{shDatetime:"=",shDatetimeFormat:"@?",shDateFormat:"@?"},template:'<span title="{{getFormattedShDatetime()}}">{{getFormattedShDatetime()}}</span>',link:function(e,t,n){e.getFormattedShDatetime=function(){var t,n,r,a,i;return null!=e.shDatetime?moment(e.shDatetime,"YYYY-MM-DD",!0).isValid()?(r=null!=(t=e.shDateFormat)?t:"DD-MM-YYYY",moment(e.shDatetime).format(r)):(a=null!=(n=e.shDatetimeFormat)?n:"DD MMM YYYY, HH:mm (z)",i=e.shDatetime,isNaN(i)&&moment(i,moment.ISO_8601).isValid()||(i=1*i),moment(i).tz(moment.defaultZone.name).format(a)):"-"}}}}]),t.directive("shTimepicker",[function(){return{restrict:"A",scope:{shTimepicker:"="},template:'<select name="duration-hour" ng-model="duration.hour" ng-options="n as n for n in ([] | shRange:0:24)" class="form-control">\n  <option value="0">0</option>\n</select>&colon;\n<select name="duration-minute" ng-model="duration.minute" ng-options="n as n for n in ([] | shRange:0:60:5)" class="form-control">\n  <option value="0">0</option>\n</select>',require:"?ngModel",link:function(e,t,n,r){var a;e.duration={hour:Math.floor(e.shTimepicker/3600),minute:e.shTimepicker%3600},a=function(t){return null!=t?(e.duration.hour=Math.floor(t/3600),e.duration.minute=Math.floor(t/60)%60):(e.duration.hour=0,e.duration.minute=5),t},r.$formatters.push(a),e.$watchCollection("duration",function(t,n){null!=t&&r.$setViewValue(60*e.duration.hour*60+60*e.duration.minute)})}}}]),n.directive("shDialog",["$compile","$templateCache","$timeout","$q",function(e,t,n,r){return{restrict:"A",replace:!0,scope:{shDialogOk:"&?",shDialogBeforeShow:"&?",shDialogOnHide:"&?",shDialogCancel:"&?",shDialogHeader:"@?",shDialogBody:"@?",shDialogFooter:"@?",shDialogForm:"@?",shDialogClass:"@?",shDialogEntity:"=?",shDialogLoading:"=?",shDialogDisabled:"&?",shDialogLabelOk:"@?",shDialogLabelClose:"@?",shDialogLabelCancel:"@?",shDialogParent:"=?",title:"@?"},link:function(a,i,o){var s,l,u,c,h,d,f;f=null!=(l=a.shDialogLabelOk)?l:"Submit",d=null!=(u=a.shDialogLabelClose)?u:"Close",h=null!=(c=a.shDialogLabelCancel)?c:"Cancel",angular.element(i).addClass("sh-dialog").children().eq(0).on("click",function(){"disabled"!==angular.element(this).find("> *:first-child").attr("disabled")&&s()}),a.showModal=function(e){n(function(){e.modal("show")},20)},a.hideModal=function(){angular.element(".modal").modal("hide")},s=function(){var n,i,s,l,u,c,m,p,g,b;u=a.$id,b=null,b=null!=a.shDialogForm?angular.element('<div id="modal-sh-dialog-'+u+'" tabindex="-1" role="dialog" aria-labelledby="modalShDialogLabel" aria-hidden="true" class="modal"><div class="modal-dialog '+(null!=(m=a.shDialogClass)?m:"modal-sm")+'"><form class="modal-content" novalidate="" name="'+a.shDialogForm+'">      <div class="modal-header">\n        <button type="button" data-dismiss="modal" aria-hidden="true" class="close">&times;</button>\n        <h4 class="modal-title"></h4>\n      </div>\n      <div class="modal-body"></div>\n      <div class="modal-footer"></div>\n    </form>\n  </div>\n</div>'):angular.element('<div id="modal-sh-dialog-'+u+'" tabindex="-1" role="dialog" aria-labelledby="modalShDialogLabel" aria-hidden="true" class="modal"><div class="modal-dialog '+(null!=(p=a.shDialogClass)?p:"modal-sm")+'">    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" data-dismiss="modal" aria-hidden="true" class="close">&times;</button>\n        <h4 class="modal-title"></h4>\n      </div>\n      <div class="modal-body"></div>\n      <div class="modal-footer"></div>\n    </div>\n  </div>\n</div>'),null!=a.shDialogHeader?(l=angular.element(t.get(a.shDialogHeader)),b.find(".modal-title").append(l)):b.find(".modal-title").html(a.title),null!=a.shDialogBody&&(i=angular.element(t.get(a.shDialogBody)),b.find(".modal-body").append(i)),null!=a.shDialogFooter?(s=angular.element(t.get(a.shDialogFooter)),b.find(".modal-footer").append(s)):null!=o.shDialogOk?(n='<button\n  class="btn btn-primary margin-left"\n\n  ng-disabled="aliasShDialogDisabled()"\n\nng-click="aliasShDialogOk($event)"\n\nsh-submit="{{aliasShDialogForm}}'+('  "\n\n  ng-attr-title="'+f+'"\n  type="submit"\n>\n'+f+"\n</button>"),b.find(".modal-footer").append(n),b.find(".modal-footer").append('<button type="button" data-dismiss="modal" class="btn btn-default margin-left">\n  '+h+"\n</button>")):b.find(".modal-footer").append('<button type="button" data-dismiss="modal" class="btn btn-default margin-left">\n  '+d+"\n</button>"),c=null!=(g=a.shDialogParent)?g:a.$parent,e(b)(c),angular.element("body").append(b),null!=a.shDialogEntity&&(c.shDialogEntity=angular.copy(a.shDialogEntity,{})),b.on("show.bs.modal",function(){var e;return c.shDialogLoading=!0,e=r.defer(),r.when((a.shDialogBeforeShow||angular.noop)()).then(function(t){return null!=(null!=t?t.data:void 0)&&(c.shDialogEntity=angular.copy(t.data,{})),e.resolve(t)},function(t){return a.hideModal(),e.reject(t)})["finally"](function(){c.shDialogLoading=!1}),e.promise}).on("hidden.bs.modal",function(){a.shDialogOnHide&&a.shDialogOnHide(),b.remove(),c.shDialogEntity={}}),a.showModal(b),c.aliasShDialogDisabled=function(){var e,t,n;return!!c.shDialogLoading||(null!=o.shDialogDisabled?a.shDialogDisabled():null!=a.shDialogForm&&((null!=(e=c[a.shDialogForm])?e.$pristine:void 0)||(null!=(t=c[a.shDialogForm])?t.$invalid:void 0)||(null!=(n=c[a.shDialogForm])?n.$submitted:void 0)))},c.aliasShDialogOk=function(e){var t;return t=r.defer(),c.shDialogLoading=!0,r.when((a.shDialogOk||angular.noop)({$event:e})).then(function(e){return a.hideModal(),t.resolve()},function(e){var n;return null!=a.shDialogForm&&null!=(n=c[a.shDialogForm])&&(n.$submitted=!1),t.reject()})["finally"](function(){c.shDialogLoading=!1}),t.promise},c.aliasShDialogForm=a.shDialogForm},a.$watch("$parent.shDialogLoading",function(e,t){null!=e&&null!=a.shDialogLoading&&(a.shDialogLoading=e)})}}}]),n.directive("shDialogDismissButton",function(){return{restrict:"EA",template:function(e,t){return'<button type="button" data-dismiss="modal" class="btn btn-default margin-left" translate="ACTION_CANCEL">\n</button>'}}}),angular.module("sh.focus",[]).directive("shFocus",["$timeout",function(e){return{scope:{shFocus:"="},link:function(t,n,r){t.$watch("shFocus",function(t){return t===!0?void e(function(){return n.eq(0).select()}):void e(function(){return n.eq(0).blur()})})}}}]),angular.module("sh.number.format",[]).directive("shNumberFormat",["$filter",function(e){return{restrict:"A",scope:{shAllowZero:"@?",shMin:"=?",shMax:"=?",shLowerThan:"@?",shGreaterThan:"@?",shLowerThanEqual:"@?",shGreaterThanEqual:"@?",shNumberInvalidMessage:"@?",shNumberHint:"@?",ngModel:"=",decimalPlaces:"@?"},require:"?ngModel",link:function(t,n,r,a){var i,o,s,l,u;return i="sh-number-"+Math.random().toString().slice(2),l="false"!==t.shAllowZero,o=function(e){return null!=e&&""!==e?1*e:null},s=function(){var e,n,r,a;t.lowerThan=o(t.shLowerThan),t.greaterThan=o(t.shGreaterThan),t.lowerThanEqual=o(t.shLowerThanEqual),t.greaterThanEqual=o(t.shGreaterThanEqual),t.lowerThanEqual=null!=(e=null!=(n=t.lowerThanEqual)?n:t.shMax)?e:1/0,t.greaterThanEqual=null!=(r=null!=(a=t.greaterThanEqual)?a:t.shMin)?r:-(1/0),t.applyValidity&&t.applyValidity()},s(),u=function(){var e,r,o,s;return e=n.attr("data-content"),a.$invalid?(a.$error.out_of_range&&(e=null!=(r=t.shNumberInvalidMessage)?r:"Invalid Number"),a.$error.required&&(e=null!=(o=t.shNumberInvalidMessage)?o:"Please insert a number")):null==a.$modelValue&&(e=null!=(s=t.shNumberHint)?s:"Insert valid number"),angular.element("."+i).find(".popover-content").html(e),t.applyValidity()},a.$formatters.push(function(t){return e("number")(parseFloat(t))}),a.$parsers.push(function(e){var n;return n=String(e).replace(/\,/g,""),n=parseFloat(n),null!=t.decimalPlaces&&(n=parseFloat(n.toFixed(t.decimalPlaces))),isNaN(n)?null:l||0!==n?null!=t.shMin&&n<parseFloat(t.shMin)?parseFloat(t.shMin):null!=t.shMax&&n>parseFloat(t.shMax)?parseFloat(t.shMax):n:null}),a.$viewChangeListeners.push(function(){return a.$invalid}),t.applyValidity=function(){var e,n;e=!0,null!=t.lowerThanEqual&&(e=e&&+t.ngModel<=t.lowerThanEqual),null!=t.greaterThanEqual&&(e=e&&+t.ngModel>=t.greaterThanEqual),null!=t.lowerThan&&(e=e&&+t.ngModel<t.lowerThan),null!=t.greaterThan&&(e=e&&+t.ngModel>t.greaterThan),l||(e=e&&0!==+t.ngModel),a.$setValidity("out_of_range",e),null!=r.required&&(n=!0,null==t.ngModel&&(n=!1),a.$setValidity("required",n))},n.on("focusout",function(){return a.$viewValue=null!=a.$modelValue?String(e("number")(a.$modelValue)):"",a.$render()}),n.on("focusin",function(){return a.$viewValue=a.$modelValue,a.$render(),n.select()}),n.on("keyup",function(){return u()}),n.on("keydown",function(e){var t,n;if(16===(t=e.keyCode)||17===t||18===t||46===t||8===t||9===t||27===t||13===t||110===t||173===t||190===t||189===t||e.keyCode>=112&&e.keyCode<=123||(65===(n=e.keyCode)||67===n||86===n)&&(e.ctrlKey===!0||e.metaKey===!0)||e.keyCode>=35&&e.keyCode<=40);else if((e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105))return e.preventDefault()}),t.$watch("ngModel",function(e,n){return t.applyValidity()}),t.$watchCollection(function(){return[t.shLowerThan,t.shGreaterThan,t.shLowerThanEqual,t.shGreaterThanEqual]},function(e,t){null!=e&&s()}),n.popover({trigger:"focus",container:"body",placement:"auto top",template:'<div class="popover '+i+'" role="tooltip">  <div class="arrow"></div>  <h3 class="popover-title"></h3>  <div class="popover-content"></div></div>'}),n.on("shown.bs.popover",function(){return u()})}}}]),angular.module("sh.segment",[]).directive("wideTableContainer",function(){var e;return e=function(e,t){t&&t[0]&&(t[0].scrollLeft=e[0].scrollLeft)},{restrict:"C",replace:!1,link:function(t,n,r){var a,i,o;a=n.find(".table-scroll-body"),o=n.find(".table-scroll-head"),i=n.find(".table-scroll-foot"),a.on("scroll",function(){e(a,o),e(a,i)})}}}).directive("shSegmentHead",function(){return{restrict:"C",scope:{},link:function(e,t,n){e.height=0,e.$watch(function(){e.height=t.outerHeight()}),e.$watch("height",function(e,n){t.next().css("top",e+"px")})}}}).directive("shSegmentFoot",function(){return{restrict:"C",scope:{},link:function(e,t,n){e.height=0,e.$watch(function(){e.height=t.outerHeight()}),e.$watch("height",function(e,n){t.prev().css("bottom",e+"px")})}}}).directive("tableScrollBody",["$timeout",function(e){return{restrict:"C",scope:{tableScrollBodyReduction:"@?"},link:function(e,t,n){var r,a,i;r=function(t,n){var r,a,i,o,s,l,u,c,h;return l=angular.element(t).parent(),u=l.parents("tr"),s=l.css("padding-top"),i=l.css("padding-left"),o=l.css("padding-right"),a=l.css("padding-bottom"),r=u.outerHeight(),c=null!=(h=e.tableScrollBodyReduction)?h:"1",c=1*c,angular.element(t).css({top:0,left:n,marginTop:"-"+s,marginLeft:"-"+i,marginRight:"-"+o,marginBottom:"-"+a,paddingTop:s,paddingLeft:i,paddingRight:o,paddingBottom:a,minHeight:r-c})},a=function(e,t,n){var r,a;if(a=angular.element(e).parent(),r=a.css("padding-right"),n>0){if(!a.next().hasClass("td-fixed"))return t>0?angular.element(e).css({boxShadow:"1px 0 0 rgba(0, 0, 0, 0.05), -1px 0 0 rgba(0, 0, 0, 0.1), "+5*n+"px 0px 0px 0px rgba(0, 0, 0, 0.03)",borderColor:"rgba(0, 0, 0, 0.1)"}):angular.element(e).css({boxShadow:"1px 0 0 rgba(0, 0, 0, 0.05), -1px 0 0 rgba(0, 0, 0, 0.05)",borderColor:"rgba(0, 0, 0, 0.05)"})}else if(!a.prev().hasClass("td-fixed"))return t>0?angular.element(e).css({boxShadow:"-1px 0 0 rgba(0, 0, 0, 0.1), "+5*n+"px 0px 0px 0px rgba(0, 0, 0, 0.03)",borderColor:"rgba(0, 0, 0, 0.1)"}):angular.element(e).css({boxShadow:"none",borderColor:"rgba(0, 0, 0, 0.05)"})},i=function(){var e,n,i,o,s,l;return e=t.parent(),o=jQuery(t).scrollTop(),i=jQuery(t).scrollLeft(),l=t[0].clientWidth,s=t.find("table").width(),n=l-s+i,e.find(".td-fixed > .td-fixed-body.td-fixed-body-left").each(function(){return r(this,i),a(this,i,1)}),e.find(".td-fixed > .td-fixed-body.td-fixed-body-right").each(function(){return r(this,n),a(this,-n,-1)}),e.find(".loading-container").css({left:i,right:-i,top:o,bottom:-o})},angular.element(t).on("scroll",function(){i()}),e.$watch(function(){i()})}}}]),o.directive("shSpinning",["ShSpinningService",function(e){return{restrict:"A",scope:!0,link:function(t,n,r){var a,i,o,s,l;if(i=13,a=30,l=10,s=38,null!=r.shSpinningSize)switch(r.shSpinningSize){case"xs":i=9,a=4,l=2,s=5;break;case"sm":i=9,a=10,l=4,s=12;break;case"md":i=11,a=20,l=7,s=25;break;case"lg":i=13,a=30,l=10,s=38}t.shSpinningLines=+r.shSpinningLines||i,t.shSpinningLength=+r.shSpinningLength||a,t.shSpinningWidth=+r.shSpinningWidth||l,t.shSpinningRadius=+r.shSpinningRadius||s,t.shSpinningCorners=+r.shSpinningCorners||1,t.shSpinningRotate=+r.shSpinningRotate||0,t.shSpinningDirection=+r.shSpinningDirection||1,t.shSpinningColor=r.shSpinningColor||"#000",t.shSpinningSpeed=+r.shSpinningSpeed||2.2,t.shSpinningTrail=+r.shSpinningTrail||100,t.shSpinningShadow=r.shSpinningShadow||!1,t.shSpinningHwaccel=r.shSpinningHwaccel||!1,t.shSpinningClassName=r.shSpinningClassName||"spinner",t.shSpinningZIndex=+r.shSpinningZIndex||2e9,t.shSpinningTop=r.shSpinningTop||"45%",t.shSpinningLeft=r.shSpinningLeft||"50%",o={lines:t.shSpinningLines,length:t.shSpinningLength,width:t.shSpinningWidth,radius:t.shSpinningRadius,corners:t.shSpinningCorners,rotate:t.shSpinningRotate,direction:t.shSpinningDirection,color:t.shSpinningColor,speed:t.shSpinningSpeed,trail:t.shSpinningTrail,shadow:t.shSpinningShadow,hwaccel:t.shSpinningHwaccel,className:t.shSpinningClassName,zIndex:t.shSpinningZIndex,top:t.shSpinningTop,left:t.shSpinningLeft},t.spinner=new Spinner(o),t.$watch(function(a,i){var o,s;e.isSpinning(r.shSpinning)?(angular.element(n).addClass("sh-spinning-spin"),null!=(o=t.spinner)&&o.spin(n[0])):(angular.element(n).removeClass("sh-spinning-spin"),null!=(s=t.spinner)&&s.stop())})}}}]),angular.module("sh.submit",[]).directive("shSubmit",["$compile","$filter",function(e,t){return{restrict:"A",scope:!0,link:function(n,r,a){var i,o,s,l;s=angular.element('<segment\n  class="sh-submit-overlay"\n  ng-mouseover="overlayHover()"\n>\n</segment>'),s.css({position:"relative","float":r.css("float")}),l=angular.element('<div\n  class="sh-submit-overlay-inner"\n  ng-mouseover="overlayInnerHover()"\n>\n</div>'),l.css({position:"absolute"}),l.appendTo(s),e(s)(n),o=a.shSubmitInvalid||t("translate")("INFO_FIELD_CORRECTION"),0===r.next(".sh-submit-overlay").length&&0===r.parents(".sh-submit-overlay").length&&(s.insertAfter(r),r.prependTo(s),l.tooltip({title:o})),i=function(e,t){var n,r;for(n=t.split("."),r=null;n.length;)r=(r||e)[n.shift()];return r},n.overlayInnerHover=function(){var e,t;(null!=(t=i(n,a.shSubmit))?t.$invalid:void 0)&&(e=r.parents("form").eq(0),e.length>0?e.addClass("sh-highlight-required"):angular.element("form[name='"+a.shSubmit+"']").addClass("sh-highlight-required"))},n.overlayHover=function(){var e;(null!=(e=i(n,a.shSubmit))?e.$invalid:void 0)&&l.css({left:r.position().left,top:r.position().top,width:r.outerWidth(),height:r.outerHeight(),marginLeft:r.css("margin-left"),marginRight:r.css("margin-right")})},n.$watch(function(){var e;return null!=(e=i(n,a.shSubmit))?e.$invalid:void 0},function(e,t){if(null!=e)return e?l.show():l.hide()})}}}]),l.directive("validFile",["$timeout",function(e){return{scope:{validFileName:"="},require:"ngModel",link:function(t,n,r,a){t.$watch("validFileName",function(n){if(null!=n)return e(function(){a.$pristine=!1,a.$setViewValue(t.validFileName),a.$pristine=!0},200),e(function(){a.$pristine=!1,a.$setViewValue(t.validFileName),a.$pristine=!0},2e3)}),n.bind("change",function(){t.$apply(function(){a.$setViewValue(n.val()),a.$render()})})}}}]),l.directive("validIdNotNull",function(){return{require:"ngModel",link:function(e,t,n,r){r.$formatters.unshift(function(e){return null==(null!=e?e.id:void 0)?null:e})}}}),angular.module("sh.view.helper",[]).directive("yesNo",function(){return{restrict:"A",scope:{yesNo:"="},template:function(e,t){return'<span ng-if="yesNo == true" class="text-success"><i class="fa fa-left fa-check"></i>{{"LABEL_YES" | translate}}</span>\n<span ng-if="yesNo == false" class="text-danger"><i class="fa fa-left fa-times"></i>{{"LABEL_NO" | translate}}</span>\n<span ng-if="yesNo == null || yesNo == undefined" class="text-muted"><i class="fa fa-left fa-dash"></i></span>'},link:function(e){var t,n;(t=e.yesNo)!==!0&&"true"!==t&&1!==t&&"TRUE"!==t||(e.yesNo=!0),(n=e.yesNo)!==!1&&"false"!==n&&0!==n&&"FALSE"!==n||(e.yesNo=!1)}}}).directive("codeName",function(){return{restrict:"EA",scope:{codeNameCode:"=?",codeNameName:"=?"},template:function(e,t){return'<span title="{{codeNameCode}} ({{codeNameName}})">\n  {{codeNameCode}} <small class="text-muted">({{codeNameName}})</small>\n</span>'}}}),angular.module("auth.token.handler",[]).factory("AuthTokenHandler",[function(){var e,t,n,r;return t={},r="none",e="none",t.getUsername=function(){return r},t.getAuthToken=function(){return e},t.setUsername=function(e){r=e},t.setAuthToken=function(t){e=t},t.wrapActions=function(e,t){var r,a;for(a=e,r=0;r<t.length;)n(a,t[r]),r++;return a},n=function(e,n){e["_"+n]=e[n],"save"===n||"update"===n?e[n]=function(r,a,i,o){return e["_"+n](angular.extend({},r||{},{username:t.getUsername(),authn_token:t.getAuthToken()}),a,i,o)}:e[n]=function(r,a,i){return e["_"+n](angular.extend({},r||{},{username:t.getUsername(),authn_token:t.getAuthToken()}),a,i)}},t}]),s.factory("ShTableParams",["$q",function(e){var t;return t=function(t){var n,r,a;return this.$params={pageNumber:null!=(n=t.pageNumber)?n:1,perPage:null!=(r=t.perPage)?r:10,sortInfo:t.sortInfo,sorting:t.sorting,autoload:null==(a=t.autoload)||a},this.$totalCount=0,this.$loading=!1,this.$data=[],this.$extras=null,this.$pagination=[],this.reload=function(){var n,r;return n=e.defer(),r=this,r.$loading=!0,t.getData().then(function(e){return r.$data=e.items,r.$totalCount=e.totalCount,null!=e.extras&&(r.$extras=e.extras),r.$pagination=r.generatePagination(r.$params.pageNumber,r.$params.perPage,r.$totalCount),r.$loading=!1,n.resolve(e)},function(e){return r.$loading=!1,n.reject(e)}),n.promise},this.isSortBy=function(e,t){return angular.isDefined(this.$params.sorting[e])&&this.$params.sorting[e]===t},this.sortData=function(e,t){this.$params.sorting={},this.$params.sorting[e]=t},this.generatePagination=function(e,t,n){var r,a,i,o,s,l,u,c,h,d,f,m;if(h=[],r=e,t=t,n=n,c=Math.ceil(n/t),a=0===c||c===r?n-t*(r-1):t,l=c>5?5:c,i=r-Math.ceil(l/2),i<0?i=0:i+l>c&&(i=c-l),c>1){for(o=i+1,m=i+l,u=s=d=o,f=m;d<=f?s<=f:s>=f;u=d<=f?++s:--s)h.push({type:"PAGE",disabled:u===r,number:u});o>1&&h.unshift({type:"MORE",disabled:!0}),m<c&&h.push({type:"MORE",disabled:!0}),h.unshift({type:"PREV",disabled:1===r,number:r-1}),h.push({type:"NEXT",disabled:r===c,number:r+1}),h.unshift({type:"FIRST",disabled:1===r,number:1}),h.push({type:"LAST",disabled:r===c,number:c})}return{pages:h,currentPage:r,perPage:t,totalCount:n,pageCount:c,currentPageCount:a}},this}}]),e.factory("ShApiHook",["$q","ShApi",function(e,t){var n;return n=function(n){var r,a,i,o,s;return o=this,o.shApiInstance=n.shApiInstance,null==(r=o.shApiInstance).resource&&(r.resource=null),null==(a=o.shApiInstance).entity&&(a.entity={}),null==(i=o.shApiInstance).optParams&&(i.optParams={}),o.shApiInstance.updatedIds=[],o.shApiInstance.deletedIds=[],o.shApiInstance.beforeApiCallEntityHooks={},o.shApiInstance.apiCallEntitySuccessHooks={},o.shApiInstance.apiCallEntityErrorHooks={},o.shApiInstance.afterApiCallEntityHooks={},s=new t({resource:o.shApiInstance.resource}),o.shApiInstance.apiCallEntity=function(t){var n,r,a,i,l,u,c,h,d,f,m,p,g,b,T,v;if(c=e.defer(),null==t.method||"GET"!==(T=t.method)&&"POST"!==T&&"PUT"!==T&&"DELETE"!==T)console.error("STARQLE_NG_UTIL: Unknown Method"),c.reject({});else if(null==t.name)console.error("STARQLE_NG_UTIL: Options name is required"),c.reject({});else{switch(n={name:t.name,method:t.method,params:o.shApiInstance.optParams},t.id&&(n.id=t.id),t.method){case"GET":case"DELETE":null!=t.entity&&(console.error("STARQLE_NG_UTIL: Options entity should not be provided"),c.reject({}));break;case"POST":case"PUT":null==t.entity?(console.error("STARQLE_NG_UTIL: Options entity is required"),c.reject({})):(u={data:t.entity},"FormData"===Object.prototype.toString.call(t.entity).slice(8,-1)&&(u=t.entity),n.data=u)}for(null==(r=o.shApiInstance.beforeApiCallEntityHooks)[m=t.name]&&(r[m]=[]),null==(a=o.shApiInstance.apiCallEntitySuccessHooks)[p=t.name]&&(a[p]=[]),null==(i=o.shApiInstance.apiCallEntityErrorHooks)[g=t.name]&&(i[g]=[]),null==(l=o.shApiInstance.afterApiCallEntityHooks)[b=t.name]&&(l[b]=[]),v=o.shApiInstance.beforeApiCallEntityHooks[t.name],d=0,f=v.length;d<f;d++)(h=v[d])();s.apiCall(n).then(function(e){var n,r,a;for(a=o.shApiInstance.apiCallEntitySuccessHooks[t.name],n=0,r=a.length;n<r;n++)(h=a[n])(e);return c.resolve(e)},function(e){var n,r,a;for(a=o.shApiInstance.apiCallEntityErrorHooks[t.name],
n=0,r=a.length;n<r;n++)(h=a[n])(e);return c.reject(e)})["finally"](function(){var e,n,r,a;for(r=o.shApiInstance.afterApiCallEntityHooks[t.name],a=[],e=0,n=r.length;e<n;e++)h=r[e],a.push(h());return a})}return c.promise},this}}]),e.factory("ShApi",["$q",function(e){var t;return t=function(t){var n;return n=this,n.resource=t.resource,n.index=function(t){var r;return r=e.defer(),n.resource.get(t).$promise.then(function(e){return r.resolve(e)},function(e){return r.reject(e)}),r.promise},n["new"]=function(t){var r;return r=e.defer(),n.resource["new"](t).$promise.then(function(e){return r.resolve(e)},function(e){return r.reject(e)}),r.promise},n.create=function(t,r){var a;return a=e.defer(),n.resource.save(t,r).$promise.then(function(e){return a.resolve(e)},function(e){return a.reject(e)}),a.promise},n.edit=function(t,r){var a;return a=e.defer(),n.resource.edit(angular.extend({id:t},r)).$promise.then(function(e){return a.resolve(e)},function(e){return a.reject(e)}),a.promise},n.update=function(t,r,a){var i;return i=e.defer(),n.resource.update(angular.extend({id:t},r),a).$promise.then(function(e){return i.resolve(e)},function(e){return i.reject(e)}),i.promise},n["delete"]=function(t,r){var a;return a=e.defer(),n.resource["delete"](angular.extend({id:t},r)).$promise.then(function(e){return a.resolve(e)},function(e){return a.reject(e)}),a.promise},n.apiCall=function(t){var r;switch(r=e.defer(),t.method){case"GET":case"DELETE":n.resource[t.name](angular.extend({id:t.id},t.params)).$promise.then(function(e){return r.resolve(e)},function(e){return r.reject(e)});break;case"POST":case"PUT":n.resource[t.name](angular.extend({id:t.id},t.params),t.data).$promise.then(function(e){return r.resolve(e)},function(e){return r.reject(e)});break;default:console.error("STARQLE_NG_UTIL: Unknown Method"),r.reject({})}return r.promise},this}}]),r.factory("ShForm",[function(){var e;return e=function(){var e;return e=this,e.entityForm=null,e.validationClass=function(t){var n,r;return r="",null!=(null!=(n=e.entityForm)?n[t]:void 0)&&(e.entityForm[t].$invalid?r+=e.entityForm[t].$dirty?"has-error ":"has-pristine-error ":e.entityForm[t].$dirty&&e.entityForm[t].$valid&&(r+="has-success ")),r},e.reset=function(){var t,n;return null!=(t=e.entityForm)&&t.$setPristine(),null!=(n=e.entityForm)?n.$setUntouched():void 0},e.resetSubmitted=function(){var t;return null!=(t=e.entityForm)?t.$submitted=!1:void 0},e.isDisabled=function(){var t,n,r;return null==e.entityForm||((null!=(t=e.entityForm)?t.$pristine:void 0)||(null!=(n=e.entityForm)?n.$invalid:void 0)||(null!=(r=e.entityForm)?r.$submitted:void 0))},e.isCompleted=function(){var t,n;return(null!=(t=e.entityForm)?t.$pristine:void 0)&&(null!=(n=e.entityForm)?n.$valid:void 0)&&!e.entityForm.$submitted},e.isDirtyAndValid=function(){var t,n;return(null!=(t=e.entityForm)?t.$dirty:void 0)&&(null!=(n=e.entityForm)?n.$valid:void 0)},e.isDirtyAndInvalid=function(){var t,n;return(null!=(t=e.entityForm)?t.$dirty:void 0)&&(null!=(n=e.entityForm)?n.$invalid:void 0)},e.isResetButtonDisabled=function(){var t,n;return(null!=(t=e.entityForm)?t.$pristine:void 0)||(null!=(n=e.entityForm)?n.$submitted:void 0)},this}}]),i.factory("ShPersistenceHookNotification",["ShNotification",function(e){var t;return t=function(t){var n;return n=this,n.shPersistence=t.shPersistence,n.shPersistence.newEntityErrorHooks.push(function(t){e.toastByResponse(t)}),n.shPersistence.createEntityErrorHooks.push(function(t){e.toastByResponse(t)}),n.shPersistence.editEntityErrorHooks.push(function(t){e.toastByResponse(t)}),n.shPersistence.updateEntityErrorHooks.push(function(t){e.toastByResponse(t)}),this}}]),i.factory("ShPersistenceHook",["$q","ShApi","ShApiHook","ShPersistenceHookNotification",function(e,t,n,r){var a;return a=function(a){var i,o,s,l,u,c,h,d,f;return c=this,c.shPersistence=a.shPersistence,null==(i=c.shPersistence).id&&(i.id=null),null==(o=c.shPersistence).resource&&(o.resource=null),null==(s=c.shPersistence).entity&&(s.entity={}),null==(l=c.shPersistence).lookup&&(l.lookup={}),null==(u=c.shPersistence).optParams&&(u.optParams={}),c.shPersistence.beforeNewEntityHooks=[],c.shPersistence.newEntitySuccessHooks=[],c.shPersistence.newEntityErrorHooks=[],c.shPersistence.afterNewEntityHooks=[],c.shPersistence.beforeCreateEntityHooks=[],c.shPersistence.createEntitySuccessHooks=[],c.shPersistence.createEntityErrorHooks=[],c.shPersistence.afterCreateEntityHooks=[],c.shPersistence.beforeEditEntityHooks=[],c.shPersistence.editEntitySuccessHooks=[],c.shPersistence.editEntityErrorHooks=[],c.shPersistence.afterEditEntityHooks=[],c.shPersistence.beforeUpdateEntityHooks=[],c.shPersistence.updateEntitySuccessHooks=[],c.shPersistence.updateEntityErrorHooks=[],c.shPersistence.afterUpdateEntityHooks=[],c.shPersistence.beforeDeleteEntityHooks=[],c.shPersistence.deleteEntitySuccessHooks=[],c.shPersistence.deleteEntityErrorHooks=[],c.shPersistence.afterDeleteEntityHooks=[],c.shPersistence.beforeInitEntityHooks=[],c.shPersistence.initEntitySuccessHooks=[],c.shPersistence.initEntityErrorHooks=[],c.shPersistence.afterInitEntityHooks=[],h=new t({resource:c.shPersistence.resource}),d=new n({shApiInstance:c.shPersistence}),f=new r({shPersistence:c.shPersistence}),c.shPersistence.newEntity=function(){var t,n,r,a,i;for(i=c.shPersistence.beforeNewEntityHooks,r=0,a=i.length;r<a;r++)(n=i[r])();return t=e.defer(),h["new"](c.shPersistence.optParams).then(function(e){var r,a,i;for(c.shPersistence.entity=e.data,null!=e.lookup&&(c.shPersistence.lookup=e.lookup),i=c.shPersistence.newEntitySuccessHooks,r=0,a=i.length;r<a;r++)(n=i[r])(e);return t.resolve(e)},function(e){var r,a,i;for(i=c.shPersistence.newEntityErrorHooks,r=0,a=i.length;r<a;r++)(n=i[r])(e);return t.reject(e)})["finally"](function(){var e,t,r,a;for(r=c.shPersistence.afterNewEntityHooks,a=[],e=0,t=r.length;e<t;e++)n=r[e],a.push(n());return a}),t.promise},c.shPersistence.createEntity=function(t){var n,r,a,i,o,s;for(s=c.shPersistence.beforeCreateEntityHooks,i=0,o=s.length;i<o;i++)(a=s[i])();return r=e.defer(),n={data:t},"FormData"===Object.prototype.toString.call(t).slice(8,-1)&&(n=t),h.create(c.shPersistence.optParams,n).then(function(e){var t,n,i;for(c.shPersistence.entity=e.data,null!=e.lookup&&(c.shPersistence.lookup=e.lookup),i=c.shPersistence.createEntitySuccessHooks,t=0,n=i.length;t<n;t++)(a=i[t])(e);return r.resolve(e)},function(e){var t,n,i;for(i=c.shPersistence.createEntityErrorHooks,t=0,n=i.length;t<n;t++)(a=i[t])(e);return r.reject(e)})["finally"](function(){var e,t,n,r;for(n=c.shPersistence.afterCreateEntityHooks,r=[],e=0,t=n.length;e<t;e++)a=n[e],r.push(a());return r}),r.promise},c.shPersistence.editEntity=function(t){var n,r,a,i,o;for(o=c.shPersistence.beforeEditEntityHooks,a=0,i=o.length;a<i;a++)(r=o[a])();return n=e.defer(),t||(t=c.shPersistence.id),h.edit(t,c.shPersistence.optParams).then(function(e){var t,a,i;for(c.shPersistence.entity=e.data,null!=e.lookup&&(c.shPersistence.lookup=e.lookup),i=c.shPersistence.editEntitySuccessHooks,t=0,a=i.length;t<a;t++)(r=i[t])(e);return n.resolve(e)},function(e){var t,a,i;for(i=c.shPersistence.editEntityErrorHooks,t=0,a=i.length;t<a;t++)(r=i[t])(e);return n.reject(e)})["finally"](function(){var e,t,n,a;for(n=c.shPersistence.afterEditEntityHooks,a=[],e=0,t=n.length;e<t;e++)r=n[e],a.push(r());return a}),n.promise},c.shPersistence.updateEntity=function(t,n){var r,a,i,o,s,l;for(l=c.shPersistence.beforeUpdateEntityHooks,o=0,s=l.length;o<s;o++)(i=l[o])();return a=e.defer(),angular.isObject(t)&&(n=t,t=c.shPersistence.id),r={data:n},"FormData"===Object.prototype.toString.call(n).slice(8,-1)&&(r=n),h.update(t,c.shPersistence.optParams,r).then(function(e){var t,n,r;for(c.shPersistence.entity=e.data,null!=e.lookup&&(c.shPersistence.lookup=e.lookup),r=c.shPersistence.updateEntitySuccessHooks,t=0,n=r.length;t<n;t++)(i=r[t])(e);return a.resolve(e)},function(e){var t,n,r;for(r=c.shPersistence.updateEntityErrorHooks,t=0,n=r.length;t<n;t++)(i=r[t])(e);return a.reject(e)})["finally"](function(){var e,t,n,r;for(n=c.shPersistence.afterUpdateEntityHooks,r=[],e=0,t=n.length;e<t;e++)i=n[e],r.push(i());return r}),a.promise},c.shPersistence.deleteEntity=function(t){var n,r,a,i,o;for(o=c.shPersistence.beforeDeleteEntityHooks,a=0,i=o.length;a<i;a++)(r=o[a])();return n=e.defer(),t||(t=c.shPersistence.id),h["delete"](t,c.shPersistence.optParams).then(function(e){var t,a,i;for(i=c.shPersistence.deleteEntitySuccessHooks,t=0,a=i.length;t<a;t++)(r=i[t])(e);return n.resolve(e)},function(e){var t,a,i;for(i=c.shPersistence.deleteEntityErrorHooks,t=0,a=i.length;t<a;t++)(r=i[t])(e);return n.reject(e)})["finally"](function(){var e,t,n,a;for(n=c.shPersistence.afterDeleteEntityHooks,a=[],e=0,t=n.length;e<t;e++)r=n[e],a.push(r());return a}),n.promise},c.shPersistence.initEntity=function(){var t,n,r,a,i;for(i=c.shPersistence.beforeInitEntityHooks,r=0,a=i.length;r<a;r++)(n=i[r])();return t=e.defer(),e.when(null!=c.shPersistence.id?c.shPersistence.editEntity(c.shPersistence.id):c.shPersistence.newEntity()).then(function(e){var r,a,i;for(i=c.shPersistence.initEntitySuccessHooks,r=0,a=i.length;r<a;r++)(n=i[r])(e);return t.resolve(e)},function(e){var r,a,i;for(i=c.shPersistence.initEntityErrorHooks,r=0,a=i.length;r<a;r++)(n=i[r])(e);return t.reject(e)})["finally"](function(){var e,t,r,a;for(r=c.shPersistence.afterInitEntityHooks,a=[],e=0,t=r.length;e<t;e++)n=r[e],a.push(n());return a}),t.promise},c.shPersistence.getLookup=function(e){var t;return null!=(t=c.shPersistence.lookup)?t[e]:void 0},this}}]),i.factory("ShPersistence",["$q","ShPersistenceHook",function(e,t){var n;return n=function(e){var n,r,a,i,o,s;return o=this,o.entity={},o.id=null!=(n=e.id)?n:null,o.localLookup={},o.optParams=null!=(r=e.optParams)?r:{},o.resource=null!=(a=e.resource)?a:null,o.sorting=null!=(i=e.sorting)?i:{id:"desc"},s=new t({shPersistence:o}),this}}]),s.factory("ShTableFilterStorage",["$location","localStorageService",function(e,t){var n;return n=function(n){var r,a,i,o,s,l,u,c;return i=this,i.shTable=n.shTable,c=[i.shTable.name,e.path()].join(""),i.shTable.beforeRefreshGridHooks.push(function(){var e,t,n,c,h,d,f,m,p,g,b,T,v,y,D,P,E;if(t=null!=(v=r())?v:{},n="undefined"===a()?i.shTable.filterParams:a(),E=null!=i.shTable.filterParams.fromShFilter?t:n,P={},D={},null!=E){for(f=Object.keys(E),c=0,p=f.length;c<p;c++)if(d=f[c],m=d.lastIndexOf("_"),b=d.substring(0,m),e=d.substring(m),b)if("_in"===e){for(D[b]=[],y=E[d],h=0,g=y.length;h<g;h++)T=y[h],D[b].push({value:T});P[b]=E[d].join(", ")}else P[b]=E[d];else P[d]=E[d];l(E),u(E),s(P),o(D)}}),r=function(){return i.shTable.filterParams},a=function(){return t.get(c)},l=function(e){i.shTable.filterParams=e},u=function(e){return t.set(c,e)},s=function(e){i.shTable.filterLabel=e},o=function(e){i.shTable.filterCollection=e},this}}]),s.factory("ShTableFilter",["$filter","HelperService",function(e,t){var n;return n=function(n){var r,a,i,o;return o=this,o.shTable=n.shTable,null==(r=o.shTable).filterParams&&(r.filterParams={}),o.shTable.filterRegion={visible:!0},a={},o.shTable.filterLabel={},o.shTable.filterCollection={},o.shTable.prepareFilterDate=function(e){return a={},delete o.shTable.filterParams[e+"_eqdate"],delete o.shTable.filterParams[e+"_lteqdate"],delete o.shTable.filterParams[e+"_gteqdate"]},o.shTable.executeFilterDate=function(){return jQuery.extend(o.shTable.filterParams,a),o.shTable.tableParams.$params.pageNumber=1,o.shTable.refreshGrid()},o.shTable.filterDateLabel=function(t,n,r){switch(t){case"ANY":return e("translate")("LABEL_ALL");case"TODAY":return e("translate")("LABEL_TODAY");case"PAST_N_DAYS":return e("translate")("LABEL_FROM")+" "+(1===r?e("translate")("LABEL_YESTERDAY"):moment().subtract(r,"days").fromNow());case"PAST_N_WEEKS":return e("translate")("LABEL_FROM")+" "+moment().subtract(r,"weeks").fromNow();case"PAST_N_MONTHS":return e("translate")("LABEL_FROM")+" "+moment().subtract(r,"months").fromNow();case"PAST_N_YEARS":return e("translate")("LABEL_FROM")+" "+moment().subtract(r,"years").fromNow();case"NEXT_N_DAYS":return 1===r?e("translate")("LABEL_THRU")+" "+e("translate")("LABEL_TOMORROW"):moment().add(r,"days").fromNow()+" "+e("translate")("LABEL_AHEAD");case"NEXT_N_WEEKS":return moment().add(r,"weeks").fromNow()+" "+e("translate")("LABEL_AHEAD");case"NEXT_N_MONTHS":return moment().add(r,"months").fromNow()+" "+e("translate")("LABEL_AHEAD");case"NEXT_N_YEARS":return moment().add(r,"years").fromNow()+" "+e("translate")("LABEL_AHEAD")}},o.shTable.filterDate=function(e,t,n){var r,a;if("RANGE"===e||"CERTAIN"===e)switch(e){case"RANGE":r=o.shTable.filterParams[t+"_gteqdate"],a=o.shTable.filterParams[t+"_lteqdate"],o.shTable.prepareFilterDate(t),o.shTable.filterDateRange(t,r,a),o.shTable.filterLabel[t]=moment(r).format("DD-MM-YYYY")+" - "+moment(a).format("DD-MM-YYYY");break;case"CERTAIN":r=o.shTable.filterParams[t+"_gteqdate"],a=r,o.shTable.prepareFilterDate(t),o.shTable.filterDateRange(t,r,a),o.shTable.filterLabel[t]=moment(r).format("DD-MM-YYYY")}else{switch(o.shTable.prepareFilterDate(t),e){case"ANY":o.shTable.filterDateAny(t);break;case"TODAY":o.shTable.filterDateToday(t);break;case"PAST_N_DAYS":o.shTable.filterDatePastNDays(t,n);break;case"PAST_N_WEEKS":o.shTable.filterDatePastNWeeks(t,n);break;case"PAST_N_MONTHS":o.shTable.filterDatePastNMonths(t,n);break;case"PAST_N_YEARS":o.shTable.filterDatePastNYears(t,n);break;case"NEXT_N_DAYS":o.shTable.filterDateNextNDays(t,n);break;case"NEXT_N_WEEKS":o.shTable.filterDateNextNWeeks(t,n);break;case"NEXT_N_MONTHS":o.shTable.filterDateNextNMonths(t,n);break;case"NEXT_N_YEARS":o.shTable.filterDateNextNYears(t,n)}o.shTable.filterLabel[t]=o.shTable.filterDateLabel(e,t,n)}return o.shTable.executeFilterDate()},o.shTable.filterDateAny=function(e){},o.shTable.filterDateToday=function(e){a[e+"_eqdate"]=moment().format("YYYY-MM-DD")},o.shTable.filterDatePastNDays=function(e,t){a[e+"_lteqdate"]=moment().format("YYYY-MM-DD"),a[e+"_gteqdate"]=moment().subtract(t,"days").format("YYYY-MM-DD")},o.shTable.filterDatePastNWeeks=function(e,t){a[e+"_lteqdate"]=moment().format("YYYY-MM-DD"),a[e+"_gteqdate"]=moment().subtract(t,"weeks").format("YYYY-MM-DD")},o.shTable.filterDatePastNMonths=function(e,t){a[e+"_lteqdate"]=moment().format("YYYY-MM-DD"),a[e+"_gteqdate"]=moment().subtract(t,"months").format("YYYY-MM-DD")},o.shTable.filterDatePastNYears=function(e,t){a[e+"_lteqdate"]=moment().format("YYYY-MM-DD"),a[e+"_gteqdate"]=moment().subtract(t,"years").format("YYYY-MM-DD")},o.shTable.filterDateNextNDays=function(e,t){a[e+"_lteqdate"]=moment().add(t,"days").format("YYYY-MM-DD"),a[e+"_gteqdate"]=moment().format("YYYY-MM-DD")},o.shTable.filterDateNextNWeeks=function(e,t){a[e+"_lteqdate"]=moment().add(t,"weeks").format("YYYY-MM-DD"),a[e+"_gteqdate"]=moment().format("YYYY-MM-DD")},o.shTable.filterDateNextNMonths=function(e,t){a[e+"_lteqdate"]=moment().add(t,"months").format("YYYY-MM-DD"),a[e+"_gteqdate"]=moment().format("YYYY-MM-DD")},o.shTable.filterDateNextNYears=function(e,t){a[e+"_lteqdate"]=moment().add(t,"years").format("YYYY-MM-DD"),a[e+"_gteqdate"]=moment().format("YYYY-MM-DD")},o.shTable.filterDateRange=function(e,t,n){a[e+"_gteqdate"]=t,a[e+"_lteqdate"]=n},i={},o.shTable.prepareFilterNumber=function(e){return i={},delete o.shTable.filterParams[e+"_eq"],delete o.shTable.filterParams[e+"_lteq"],delete o.shTable.filterParams[e+"_gteq"]},o.shTable.executeFilterNumber=function(){return jQuery.extend(o.shTable.filterParams,i),o.shTable.tableParams.$params.pageNumber=1,o.shTable.refreshGrid()},o.shTable.filterNumberLabel=function(t,n,r,a){var o;switch(null==r&&(r=i[n+"_gteq"]),null==a&&(a=i[n+"_lteq"]),o=null!=i[n+"_eq"]?i[n+"_eq"]:r,t){case"ANY":return e("translate")("LABEL_ALL");case"BETWEEN":return e("number")(r)+" - "+e("number")(a);case"LOWER_THAN":return"≤ "+e("number")(a);case"GREATER_THAN":return"≥ "+e("number")(r);case"RANGE":return null!=r&&null!=a?r===a?e("number")(r):e("number")(r)+" - "+e("number")(a):null!=r?"≥ "+e("number")(r):null!=a?"≤ "+e("number")(a):e("translate")("LABEL_ALL");case"CERTAIN":return e("number")(o)}},o.shTable.filterNumber=function(e,t,n,r){var a;switch(e){case"ANY":o.shTable.prepareFilterNumber(t),o.shTable.filterNumberAny(t);break;case"BETWEEN":o.shTable.prepareFilterNumber(t),o.shTable.filterNumberRange(t,n,r);break;case"LOWER_THAN":r=o.shTable.filterParams[t+"_lteq"],o.shTable.prepareFilterNumber(t),o.shTable.filterNumberRange(t,null,r);break;case"GREATER_THAN":n=o.shTable.filterParams[t+"_gteq"],o.shTable.prepareFilterNumber(t),o.shTable.filterNumberRange(t,n,null);break;case"RANGE":n=o.shTable.filterParams[t+"_gteq"],r=o.shTable.filterParams[t+"_lteq"],o.shTable.prepareFilterNumber(t),o.shTable.filterNumberRange(t,n,r);break;case"CERTAIN":a=o.shTable.filterParams[t+"_eq"],o.shTable.prepareFilterNumber(t),o.shTable.filterNumberSpecific(t,a)}return o.shTable.filterLabel[t]=o.shTable.filterNumberLabel(e,t),o.shTable.executeFilterNumber()},o.shTable.filterNumberAny=function(e){},o.shTable.filterNumberSpecific=function(e,t){i[e+"_eq"]=t},o.shTable.filterNumberRange=function(e,t,n){null!=t&&(i[e+"_gteq"]=t),null!=n&&(i[e+"_lteq"]=n),null!=t&&null!=n&&t>n&&(i[e+"_gteq"]=n,i[e+"_lteq"]=t)},o.shTable.filterTextCont=function(e){return o.shTable.tableParams.$params.pageNumber=1,o.shTable.filterParams.fromShFilter=!0,o.shTable.refreshGrid()},o.shTable.getLabelTextCont=function(e){return o.shTable.filterParams[e+"_cont"]||null},o.shTable.filterYearBetween=function(e,t){return o.shTable.filterParams[e+"_month"]=null,o.shTable.filterParams[e+"_year"]=t,o.shTable.filterParams[e+"_lteqdate"]=t+"-12-31",o.shTable.filterParams[e+"_gteqdate"]=t+"-01-01",o.shTable.filterParams.fromShFilter=!0,o.shTable.refreshGrid()},o.shTable.filterMonthBetween=function(e,t){var n,r;return o.shTable.filterParams[e+"_year"]&&(r=o.shTable.filterParams[e+"_year"],t=("00"+t).slice(-2),o.shTable.filterParams[e+"_month"]=t,n=moment(r+"-"+t+"-01"),o.shTable.filterParams[e+"_lteqdate"]=n.endOf("month").format("YYYY-MM-DD"),o.shTable.filterParams[e+"_gteqdate"]=n.startOf("month").format("YYYY-MM-DD")),o.shTable.filterParams.fromShFilter=!0,o.shTable.refreshGrid()},o.shTable.filterInCollection=function(t,n){return null==n&&(n=null),null!=n?(o.shTable.filterLabel[t]=o.shTable.filterCollection[t].map(function(t){return e("translate")(t[n+""])}).join(", "),o.shTable.filterParams[t+"_in"]=o.shTable.filterCollection[t].map(function(e){return e[n+""]})):(o.shTable.filterLabel[t]=o.shTable.filterCollection[t].map(function(t){return e("translate")(t)}).join(", "),o.shTable.filterParams[t+"_in"]=o.shTable.filterCollection[t]),o.shTable.filterParams.fromShFilter=!0,o.shTable.refreshGrid()},o.shTable.collectionNavbarFilterSelect=function(e,n,r){return null==r&&(r=null),null==o.shTable.filterCollection[e]&&(o.shTable.filterCollection[e]=[]),t.rowSelect(n,o.shTable.filterCollection[e],r),o.shTable.filterInCollection(e,r)},o.shTable.collectionNavbarFilterDeselect=function(e,n,r){return null==r&&(r=null),null==o.shTable.filterCollection[e]&&(o.shTable.filterCollection[e]=[]),t.rowDeselect(n,o.shTable.filterCollection[e],r),o.shTable.filterInCollection(e,r)},o.shTable.collectionNavbarFilterIsSelected=function(e,n,r){return null==r&&(r=null),null==o.shTable.filterCollection[e]&&(o.shTable.filterCollection[e]=[]),t.isRowSelected(n,o.shTable.filterCollection[e],r)},o.shTable.collectionNavbarClearSelection=function(e,n){return null==n&&(n=null),null==o.shTable.filterCollection[e]&&(o.shTable.filterCollection[e]=[]),t.clearRowSelection(o.shTable.filterCollection[e]),o.shTable.filterInCollection(e,n)},o.shTable.collectionNavbarFilterIsSelectionEmpty=function(e,n){return null==n&&(n=null),null==o.shTable.filterCollection[e]&&(o.shTable.filterCollection[e]=[]),t.isRowSelectionEmpty(o.shTable.filterCollection[e])},o.shTable.toggleFilterRegion=function(){o.shTable.filterRegion.visible=!o.shTable.filterRegion.visible},o.shTable.resetFilter=function(){var e,n,r;o.shTable.filterParams={},o.shTable.filterLabel={},n=o.shTable.filterCollection;for(e in n)r=n[e],t.clearRowSelection(o.shTable.filterCollection[e]);return o.shTable.filterParams.fromShFilter=!0,o.shTable.refreshGrid()},o.shTable.isNoFilter=function(){return jQuery.isEmptyObject(o.shTable.filterParams)},this}}]),s.factory("ShTableHelper",["$q",function(e){var t;return t=function(e){var t;return t=this,t.shTable=e.shTable,t.shTable.sortableClass=function(e){return t.shTable.tableParams.isSortBy(e,"asc")?"sortable sort-asc":t.shTable.tableParams.isSortBy(e,"desc")?"sortable sort-desc":"sortable"},t.shTable.sortableClick=function(e){var n;n=t.shTable.tableParams.isSortBy(e,"asc")?"desc":"asc",t.shTable.tableParams.sortData(e,n),t.shTable.refreshGrid()},t.shTable.rowRestEventClass=function(e){return t.shTable.isRecentlyDeleted(e)?"recently-deleted":t.shTable.isRecentlyUpdated(e)?"recently-updated":t.shTable.isRecentlyCreated(e)?"recently-created":""},t.shTable.isRecentlyCreated=function(e){return t.shTable.createdIds.indexOf((null!=e?e.id:void 0)||e)>=0},t.shTable.isRecentlyUpdated=function(e){return t.shTable.updatedIds.indexOf((null!=e?e.id:void 0)||e)>=0},t.shTable.isRecentlyDeleted=function(e){return t.shTable.deletedIds.indexOf((null!=e?e.id:void 0)||e)>=0},this}}]),s.factory("ShTableHookNotification",["ShNotification",function(e){var t;return t=function(t){var n;return n=this,n.shTable=t.shTable,n.shTable.getEntitiesErrorHooks.push(function(t){e.toastByResponse(t)}),n.shTable.newEntityErrorHooks.push(function(t){e.toastByResponse(t)}),n.shTable.createEntityErrorHooks.push(function(t){e.toastByResponse(t)}),n.shTable.editEntityErrorHooks.push(function(t){e.toastByResponse(t)}),n.shTable.updateEntityErrorHooks.push(function(t){e.toastByResponse(t)}),n.shTable.deleteEntityErrorHooks.push(function(t){e.toastByResponse(t)}),this}}]),s.factory("ShTableHook",["$q","localStorageService","ShApi","ShApiHook","ShTableHookNotification",function(e,t,n,r,a){var i;return i=function(t){var i,o,s,l,u,c,h,d;return u=this,u.shTable=t.shTable,null==(i=u.shTable).resource&&(i.resource=null),null==(o=u.shTable).entity&&(o.entity={}),null==(s=u.shTable).lookup&&(s.lookup={}),null==(l=u.shTable).optParams&&(l.optParams={}),u.shTable.createdIds=[],u.shTable.updatedIds=[],u.shTable.deletedIds=[],u.shTable.beforeGetEntitiesHooks=[],u.shTable.getEntitiesSuccessHooks=[],u.shTable.getEntitiesErrorHooks=[],u.shTable.afterGetEntitiesHooks=[],u.shTable.beforeNewEntityHooks=[],u.shTable.newEntitySuccessHooks=[],u.shTable.newEntityErrorHooks=[],u.shTable.afterNewEntityHooks=[],u.shTable.beforeCreateEntityHooks=[],u.shTable.createEntitySuccessHooks=[],u.shTable.createEntityErrorHooks=[],u.shTable.afterCreateEntityHooks=[],u.shTable.beforeEditEntityHooks=[],u.shTable.editEntitySuccessHooks=[],u.shTable.editEntityErrorHooks=[],u.shTable.afterEditEntityHooks=[],u.shTable.beforeUpdateEntityHooks=[],u.shTable.updateEntitySuccessHooks=[],u.shTable.updateEntityErrorHooks=[],u.shTable.afterUpdateEntityHooks=[],u.shTable.beforeDeleteEntityHooks=[],u.shTable.deleteEntitySuccessHooks=[],u.shTable.deleteEntityErrorHooks=[],u.shTable.afterDeleteEntityHooks=[],c=new n({resource:u.shTable.resource}),h=new r({shApiInstance:u.shTable}),d=new a({shTable:u.shTable}),u.shTable.getEntities=function(){var t,n,r,a,i;for(i=u.shTable.beforeGetEntitiesHooks,r=0,a=i.length;r<a;r++)(n=i[r])();return t=e.defer(),c.index(u.shTable.optParams).then(function(e){var r,a,i;for(i=u.shTable.getEntitiesSuccessHooks,r=0,a=i.length;r<a;r++)(n=i[r])(e);return t.resolve(e)},function(e){var r,a,i;for(i=u.shTable.getEntitiesErrorHooks,r=0,a=i.length;r<a;r++)(n=i[r])(e);return t.reject(e)})["finally"](function(){var e,t,r,a;for(r=u.shTable.afterGetEntitiesHooks,a=[],e=0,t=r.length;e<t;e++)n=r[e],a.push(n());return a}),t.promise},u.shTable.newEntity=function(){var t,n,r,a,i;for(i=u.shTable.beforeNewEntityHooks,r=0,a=i.length;r<a;r++)(n=i[r])();return t=e.defer(),c["new"](u.shTable.optParams).then(function(e){var r,a,i;for(u.shTable.entity=e.data,null!=e.lookup&&(u.shTable.lookup=e.lookup),i=u.shTable.newEntitySuccessHooks,r=0,a=i.length;r<a;r++)(n=i[r])(e);return t.resolve(e)},function(e){var r,a,i;for(i=u.shTable.newEntityErrorHooks,r=0,a=i.length;r<a;r++)(n=i[r])(e);return t.reject(e)})["finally"](function(){var e,t,r,a;for(r=u.shTable.afterNewEntityHooks,a=[],e=0,t=r.length;e<t;e++)n=r[e],a.push(n());return a}),t.promise},u.shTable.createEntity=function(t){var n,r,a,i,o,s;for(s=u.shTable.beforeCreateEntityHooks,i=0,o=s.length;i<o;i++)(a=s[i])();return r=e.defer(),n={data:t},"FormData"===Object.prototype.toString.call(t).slice(8,-1)&&(n=t),c.create(u.shTable.optParams,n).then(function(e){var t,n,i;for(u.shTable.createdIds.push(e.data.id),u.shTable.entity=e.data,null!=e.lookup&&(u.shTable.lookup=e.lookup),u.shTable.refreshGrid(),i=u.shTable.createEntitySuccessHooks,t=0,n=i.length;t<n;t++)(a=i[t])(e);return r.resolve(e)},function(e){var t,n,i;for(i=u.shTable.createEntityErrorHooks,t=0,n=i.length;t<n;t++)(a=i[t])(e);return r.reject(e)})["finally"](function(){var e,t,n,r;for(n=u.shTable.afterCreateEntityHooks,r=[],e=0,t=n.length;e<t;e++)a=n[e],r.push(a());return r}),r.promise},u.shTable.editEntity=function(t){var n,r,a,i,o;for(o=u.shTable.beforeEditEntityHooks,a=0,i=o.length;a<i;a++)(r=o[a])();return n=e.defer(),c.edit(t,u.shTable.optParams).then(function(e){var t,a,i;for(u.shTable.entity=e.data,null!=e.lookup&&(u.shTable.lookup=e.lookup),i=u.shTable.editEntitySuccessHooks,t=0,a=i.length;t<a;t++)(r=i[t])(e);return n.resolve(e)},function(e){var t,a,i;for(i=u.shTable.editEntityErrorHooks,t=0,a=i.length;t<a;t++)(r=i[t])(e);return n.reject(e)})["finally"](function(){var e,t,n,a;for(n=u.shTable.afterEditEntityHooks,a=[],e=0,t=n.length;e<t;e++)r=n[e],a.push(r());return a}),n.promise},u.shTable.updateEntity=function(t,n){var r,a,i,o,s,l;for(l=u.shTable.beforeUpdateEntityHooks,o=0,s=l.length;o<s;o++)(i=l[o])();return a=e.defer(),r={data:n},"FormData"===Object.prototype.toString.call(n).slice(8,-1)&&(r=n),c.update(t,u.shTable.optParams,r).then(function(e){var t,n,r;for(u.shTable.updatedIds.push(e.data.id),u.shTable.entity=e.data,null!=e.lookup&&(u.shTable.lookup=e.lookup),u.shTable.refreshGrid(),r=u.shTable.updateEntitySuccessHooks,t=0,n=r.length;t<n;t++)(i=r[t])(e);return a.resolve(e)},function(e){var t,n,r;for(r=u.shTable.updateEntityErrorHooks,t=0,n=r.length;t<n;t++)(i=r[t])(e);return a.reject(e)})["finally"](function(){var e,t,n,r;for(n=u.shTable.afterUpdateEntityHooks,r=[],e=0,t=n.length;e<t;e++)i=n[e],r.push(i());return r}),a.promise},u.shTable.deleteEntity=function(t){var n,r,a,i,o;for(o=u.shTable.beforeDeleteEntityHooks,a=0,i=o.length;a<i;a++)(r=o[a])();return n=e.defer(),c["delete"](t,u.shTable.optParams).then(function(e){var a,i,o;for(u.shTable.deletedIds.push(t),u.shTable.refreshGrid(),o=u.shTable.deleteEntitySuccessHooks,a=0,i=o.length;a<i;a++)(r=o[a])(e);return n.resolve(e)},function(e){var t,a,i;for(i=u.shTable.deleteEntityErrorHooks,t=0,a=i.length;t<a;t++)(r=i[t])(e);return n.reject(e)})["finally"](function(){var e,t,n,a;for(n=u.shTable.afterDeleteEntityHooks,a=[],e=0,t=n.length;e<t;e++)r=n[e],a.push(r());return a}),n.promise},u.shTable.getLookup=function(e){var t;return null!=(t=u.shTable.lookup)?t[e]:void 0},this}}]),s.factory("ShTableParamsHook",["$q",function(e){var t;return t=function(t){var n;return n=this,n.shTable=t.shTable,n.shTable.beforeRefreshGridHooks=[],n.shTable.refreshGridSuccessHooks=[],n.shTable.refreshGridErrorHooks=[],n.shTable.afterRefreshGridHooks=[],n.shTable.goToPage=function(e,t){null!=e&&(n.shTable.tableParams.$params.perPage=t||n.shTable.tableParams.$params.perPage,n.shTable.tableParams.$params.pageNumber=e),n.shTable.refreshGrid()},n.shTable.refreshGrid=function(){var t,r,a,i,o;for(o=n.shTable.beforeRefreshGridHooks,a=0,i=o.length;a<i;a++)(r=o[a])();return t=e.defer(),n.shTable.tableParams.reload().then(function(e){var a,i,o;for(o=n.shTable.refreshGridSuccessHooks,a=0,i=o.length;a<i;a++)(r=o[a])(e);return t.resolve(e)},function(e){var a,i,o;for(o=n.shTable.refreshGridErrorHooks,a=0,i=o.length;a<i;a++)(r=o[a])(e);return t.reject(e)})["finally"](function(){var e,t,a,i;for(a=n.shTable.afterRefreshGridHooks,i=[],e=0,t=a.length;e<t;e++)r=a[e],i.push(r());return i}),t.promise},n.shTable.getPagedDataAsync=function(){var t;return t=e.defer(),n.shTable.getEntities().then(function(e){return t.resolve({items:e.data.items,totalCount:e.data.total_server_items})}),t.promise},this}}]),s.factory("ShTableProcessor",[function(){var e;return e=function(){var e;return e=this,e.generateGridParams=function(t){var n,r,a,i,o;i=t.params,r=[],n=[];for(o in i.sorting)r.push(o),n.push(i.sorting[o]);return a={page:i.pageNumber,per_page:i.perPage,sort_info:JSON.stringify({fields:r,directions:n}),filter_params:{},column_defs:JSON.stringify(e.getProcessedColumnDefs(t.columnDefs))},t.filterParams&&angular.extend(a.filter_params,t.filterParams),a},e.getProcessedColumnDefs=function(e){var t,n,r,a;for(a=[],n=0,r=e.length;n<r;n++)t=e[n],""!==t.field&&a.push({field:t.field});return a},this}}]),s.factory("ShTable",["$q","ShTableFilter","ShTableHelper","ShTableHook","ShTableParamsHook","ShTableProcessor","ShTableFilterStorage","ShTableParams",function(e,t,n,r,a,i,o,s){var l;return l=function(e){var l,u,c,h,d,f,m,p,g,b,T,v,y,D;return p=this,p.entity={},p.columnDefs=null!=(l=e.columnDefs)?l:[],p.filterParams=null!=(u=e.filterParams)?u:{},p.localLookup={},p.name=null!=(c=e.name)?c:"",p.optParams=null!=(h=e.optParams)?h:{},p.perPage=null!=(d=e.perPage)?d:10,p.resource=null!=(f=e.resource)?f:null,p.sorting=null!=(m=e.sorting)?m:{},g=new t({shTable:p}),T=new n({shTable:p}),v=new r({shTable:p}),y=new a({shTable:p}),D=new i,b=new o({shTable:p}),p.tableParams=new s({pageNumber:1,perPage:p.perPage,sortInfo:"this is sort info",sorting:p.sorting,getData:function(){var e;return e=D.generateGridParams({params:p.tableParams.$params,columnDefs:p.columnDefs,filterParams:p.filterParams}),angular.extend(p.optParams,e),p.getPagedDataAsync()}}),this}}]),angular.module("sh.filter.collection",[]).filter("shFilterCollection",function(){return function(e,t,n){if(e&&n)return e.filter(function(e){return t(e,n)})}}).filter("searchAnyIn",["$filter",function(e){return function(e,t,n){return n?e.filter(function(e){var r,a,i,o;for(o=!1,a=0,i=t.length;a<i;a++)r=t[a],o||(o=o||e[r].toLowerCase().indexOf(n.toLowerCase())>=0);return o}):e}}]),angular.module("sh.floating.precision",[]).filter("shFloatingPrecision",function(){return function(e,t){return null==t&&(t=12),parseFloat(e.toPrecision(t))}}),angular.module("sh.range",[]).filter("shRange",function(){return function(e,t,n,r){var a;for(r=r?parseInt(r):1,t=parseInt(t),n=parseInt(n),a=t;a<n;)e.push(a),a+=r;return e}}),angular.module("sh.remove.duplicates",[]).filter("shRemoveDuplicates",[function(){return function(e,t,n){var r,a,i,o,s,l,u,c,h;if(e){for(l=[],u={},r={},a=0,s=e.length;a<s;a++)i=e[a],u[i[t]]=angular.extend({},i),c=u[i[t]],"function"==typeof n&&n(c,c[t],r);for(o in u)h=u[o],h[t]=o,l.push(h);return l}}}]),angular.module("sh.strip.html",[]).filter("shStripHtml",function(){return function(e){return e?e.replace(/<[^>]+>/gm,""):""}}),angular.module("sh.strip.to.newline",[]).filter("shStripToNewline",function(){return function(e){return e?e.replace(/\s-\s/g,"<br/>"):""}}),angular.module("sh.truncate",[]).filter("shTruncate",[function(){return function(e,t,n,r){var a;return e?(n=parseInt(n,10))?e.length<=n?e:(e=e.substr(0,n),t&&(a=e.lastIndexOf(" "),a!==-1&&(e=e.substr(0,a))),e+(r||" ...")):e:""}}]),angular.module("sh.notification",[]).service("ShNotification",["$timeout","$interval",function(e,t){var n,r;r=3e3,n=500,this.toasts=[],this.notifications=[],this.addToast=function(e,t,a){var i;i={index:0,lifetime:r,duration:n,beforeAdd:function(){},afterAdd:function(){},beforeRemove:function(){},afterRemove:function(){}},null!=e.type&&null!=e.message?(i.toast=e,null!=t&&(i.lifetime=t),null!=a&&(i.duration=a),i.toast.deathtime=Date.now()+i.lifetime,i.toast.alive=!0):angular.extend(i,e),i.beforeAdd.call(this),this.toasts.unshift(i.toast),i.afterAdd.call(this)},this.removeOldestToast=function(){
this.removeToast(this.toasts.length-1)},this.removeToast=function(t,a,i){var o,s;o={index:0,lifetime:r,duration:n,beforeRemove:function(){},afterRemove:function(){}},"number"==typeof(1*t)&&isFinite(1*t)?(o.index=1*t,null!=a&&(o.lifetime=a),null!=i&&(o.duration=i)):angular.extend(o,t),s=this.toasts,o.beforeRemove.call(this),angular.element("#toast-group-item-"+o.index).animate({height:0,opacity:0},o.duration),e(function(){return s.splice(o.index,1),o.afterRemove.call(this)},o.duration+1)},this.runInterval=function(e){t(function(){var t,n,r,a,i,o,s;for(a=e.toasts,o=[],t=n=0,r=a.length;n<r;t=++n)s=a[t],s.alive&&s.deathtime<Date.now()?(s.alive=!1,"error"!==(i=s.type)&&"danger"!==i?o.push(e.removeToast(t,1)):o.push(void 0)):o.push(void 0);return o},500,0,!1)},this.addNotification=function(e){var t;t={index:0,beforeAdd:function(){},afterAdd:function(){},beforeRemove:function(){},afterRemove:function(){}},null!=e.type&&null!=e.message?t.notification=e:angular.extend(t,e),t.beforeAdd.call(this),this.notifications.unshift(t.notification),t.afterAdd.call(this)},this.removeNotification=function(t,r){var a,i;i={index:0,duration:n,beforeRemove:function(){},afterRemove:function(){}},"number"==typeof(1*t)&&isFinite(1*t)?(i.index=1*t,null!=r&&(i.duration=r)):angular.extend(i,t),a=this.notifications,i.beforeRemove.call(this),angular.element("#notification-group-item-"+i.index).animate({height:0,opacity:0},i.duration),e(function(){return a.splice(i.index,1),i.afterRemove.call(this)},i.duration)},this.toastByResponse=function(e,t){var n,r,a,i,o,s,l,u,c;if(e.notification)for(u=e.notification.notifications,n=function(t){return function(n){return t.addToast({type:n.type,data:e,message:n.message,field:n.field})}}(this),a=0,o=u.length;a<o;a++)l=u[a],n(l);else if(e.data&&e.data.error)for(c=e.data.error.errors,r=function(t){return function(n){return t.addToast({type:"danger",data:e,message:n.message,field:n.field})}}(this),i=0,s=c.length;i<s;i++)l=c[i],r(l);else t?this.addToast({type:t.type,data:e,message:t.message,field:t.field}):this.addToast({type:"danger",data:e,message:e.data})},this.runInterval(this)}]),angular.module("sh.page.service",[]).service("ShPageService",["$window",function(e){var t,n;n="",t="",this.setPageTitle=function(t){n=t,e.document.title=this.getAppName()+" - "+this.getPageTitle(),this.getPageTitle()},this.getPageTitle=function(){return n},this.setAppName=function(n){t=n,e.document.title=this.getAppName()+" - "+this.getPageTitle(),this.getAppName()},this.getAppName=function(){return t}}]),o.service("ShSpinningService",function(){var e;e={},this.spin=function(t,n){null==n&&(n=!0),n?e[t]=!0:this.stop(t)},this.stop=function(t){delete e[t]},this.isSpinning=function(t){return e[t]===!0}}),a.service("HelperService",[function(){this.rowSelect=function(e,t,n){var r;r=null!=n?t.map(function(e){return e[n+""]}).indexOf(e[n+""]):t.indexOf(e),r<0&&t.push(e)},this.rowDeselect=function(e,t,n){var r;r=null!=n?t.map(function(e){return e[n+""]}).indexOf(e[n+""]):t.indexOf(e),r>=0&&t.splice(r,1)},this.clearRowSelection=function(e){e.splice(0)},this.rowToggle=function(e,t,n){this.isRowSelected(e,t,n)?this.rowDeselect(e,t,n):this.rowSelect(e,t,n)},this.isRowSelected=function(e,t,n){return null!=n?t.map(function(e){return e[n+""]}).indexOf(e[n+""])>=0:t.indexOf(e)>=0},this.getRowSelection=function(e,t){return null!=t?e.map(function(e){return e[t+""]}):e},this.totalRowSelection=function(e){return e.length},this.isRowSelectionEmpty=function(e){return 0===this.totalRowSelection(e)},this.selectAttributes=function(e){var t,n,r,a,i;if(null!=e){for(t=Array.prototype.slice.call(arguments,1),i={},n=0,a=t.length;n<a;n++)r=t[n],i[r]=e[r];return i}return e},this.findById=function(e,t){return e.filter(function(e){return+e.id===+t})},this.findFirstById=function(e,t){var n;return null!=(n=e.filter(function(e){return+e.id===+t})[0])?n:{}},this.findByField=function(e,t){return e.filter(function(e){return e.field===t})},this.findByElmt=function(e,t){return e.filter(function(e){return+e===+t})}}]),angular.module("starqle.ng.util",["on.root.scope","sh.bootstrap","sh.collapsible","sh.focus","sh.number.format","sh.segment","sh.submit","sh.view.helper","auth.token.handler","sh.filter.collection","sh.floating.precision","sh.range","sh.remove.duplicates","sh.strip.html","sh.strip.to.newline","sh.truncate","sh.api.module","sh.datepicker.module","sh.dialog.module","sh.form.module","sh.helper.module","sh.persistence.module","sh.spinning.module","sh.table.module","sh.validation.module","sh.notification","sh.page.service"])}();